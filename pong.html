<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pong Game - AI Opponent</title>
  <style>
    body {
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    canvas {
      background: #000;
      display: block;
      border: 2px solid #fff;
    }
    h1 {
      color: #fff;
      text-align: center;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div>
    <h1>Web Pong (with AI Opponent)</h1>
    <canvas id="pong" width="700" height="400"></canvas>
    <p style="color:white;text-align:center;">Player: W/S to move | Opponent: AI</p>
  </div>
  <script>
    const canvas = document.getElementById("pong");
    const ctx = canvas.getContext("2d");

    // Game objects
    const paddleWidth = 10, paddleHeight = 80;
    const netWidth = 4, netHeight = canvas.height;

    let leftScore = 0, rightScore = 0;

    const leftPaddle = {
      x: 10, y: canvas.height/2 - paddleHeight/2,
      width: paddleWidth,
      height: paddleHeight,
      dy: 0
    };

    const rightPaddle = {
      x: canvas.width - paddleWidth - 10,
      y: canvas.height/2 - paddleHeight/2,
      width: paddleWidth,
      height: paddleHeight,
      dy: 0
    };

    const ball = {
      x: canvas.width/2,
      y: canvas.height/2,
      radius: 8,
      speed: 5,
      dx: 5 * (Math.random() < 0.5 ? 1 : -1),
      dy: 5 * (Math.random() < 0.5 ? 1 : -1)
    };

    function drawRect(x, y, w, h, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, w, h);
    }

    function drawCircle(x, y, r, color) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI*2, false);
      ctx.closePath();
      ctx.fill();
    }

    function drawText(text, x, y, color) {
      ctx.fillStyle = color;
      ctx.font = "40px Arial";
      ctx.fillText(text, x, y);
    }

    function drawNet() {
      for (let i = 0; i <= canvas.height; i += 20) {
        drawRect(canvas.width/2 - netWidth/2, i, netWidth, 10, "#FFF");
      }
    }

    function resetBall() {
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
      ball.dx = ball.speed * (Math.random() < 0.5 ? 1 : -1);
      ball.dy = ball.speed * (Math.random() < 0.5 ? 1 : -1);
    }

    function update() {
      // Move player paddle
      leftPaddle.y += leftPaddle.dy;
      leftPaddle.y = Math.max(Math.min(leftPaddle.y, canvas.height - paddleHeight), 0);

      // AI logic for right paddle
      // Simple AI: follows the ball with a maximum speed limit
      const aiSpeed = 4;
      if (ball.y > rightPaddle.y + paddleHeight/2) {
        rightPaddle.dy = aiSpeed;
      } else if (ball.y < rightPaddle.y + paddleHeight/2) {
        rightPaddle.dy = -aiSpeed;
      } else {
        rightPaddle.dy = 0;
      }
      rightPaddle.y += rightPaddle.dy;
      rightPaddle.y = Math.max(Math.min(rightPaddle.y, canvas.height - paddleHeight), 0);

      // Move ball
      ball.x += ball.dx;
      ball.y += ball.dy;

      // Top/bottom wall collision
      if (ball.y - ball.radius < 0 || ball.y + ball.radius > canvas.height) {
        ball.dy *= -1;
      }

      // Paddle collision
      let paddle = (ball.x < canvas.width/2) ? leftPaddle : rightPaddle;
      if (
        ball.x - ball.radius < paddle.x + paddle.width &&
        ball.x + ball.radius > paddle.x &&
        ball.y + ball.radius > paddle.y &&
        ball.y - ball.radius < paddle.y + paddle.height
      ) {
        // Calculate hit point
        let collidePoint = ball.y - (paddle.y + paddle.height/2);
        collidePoint = collidePoint / (paddle.height/2);
        let angleRad = collidePoint * Math.PI/4;
        let direction = (ball.x < canvas.width/2) ? 1 : -1;
        ball.dx = direction * ball.speed * Math.cos(angleRad);
        ball.dy = ball.speed * Math.sin(angleRad);
        ball.speed += 0.2;
      }

      // Score
      if (ball.x - ball.radius < 0) {
        rightScore++;
        ball.speed = 5;
        resetBall();
      } else if (ball.x + ball.radius > canvas.width) {
        leftScore++;
        ball.speed = 5;
        resetBall();
      }
    }

    function render() {
      // Clear canvas
      drawRect(0, 0, canvas.width, canvas.height, "#000");
      // Draw net
      drawNet();
      // Draw scores
      drawText(leftScore, canvas.width/4, 50, "#FFF");
      drawText(rightScore, 3 * canvas.width/4, 50, "#FFF");
      // Draw paddles
      drawRect(leftPaddle.x, leftPaddle.y, paddleWidth, paddleHeight, "#FFF");
      drawRect(rightPaddle.x, rightPaddle.y, paddleWidth, paddleHeight, "#FFF");
      // Draw ball
      drawCircle(ball.x, ball.y, ball.radius, "#FFF");
    }

    function game() {
      update();
      render();
      requestAnimationFrame(game);
    }

    // Controls for player paddle only
    document.addEventListener("keydown", function(e) {
      switch(e.key) {
        case "w": leftPaddle.dy = -7; break;
        case "s": leftPaddle.dy = 7; break;
      }
    });

    document.addEventListener("keyup", function(e) {
      switch(e.key) {
        case "w":
        case "s":
          leftPaddle.dy = 0; break;
      }
    });

    // Start game
    game();
  </script>
</body>
</html>
